<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>TW | AK3W</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/solarized.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">

        <section>
            <section data-background="img/title.png" data-background-size="contain" style="padding-top: 100px;">
                <div style="font-size: 18px; line-height: 1.4em;">
                    Contact accounts @ <a href="http://www.troywest.com">troywest.com</a> to arrange a workshop day.
                </div>
                <br/>
                <a href="#" class="navigate-right"><i class="fas fa-chevron-right"></i> Start</a>
                <br/>
                <a href="#" class="navigate-down"><i class="fas fa-chevron-down"></i> Contents</a>
                <br/>
                <br/>

                <div style="font-size: 12px; line-height: 1.4em;">
                    Press: 's' - Speaker Notes, ?' - Help
                </div>
                <div style="font-size: 12px; line-height: 1.4em;">
                    Copyright &copy; 2019 Troy-West, Pty Ltd. <a
                        href="https://github.com/troy-west/apache-kafka-three-ways">Open Sourced</a> under the MIT
                    License.
                </div>
            </section>

            <section data-markdown>
                <textarea data-template>
                    * <a href="#" class="navigate-up">Start</a>
                    * [Prequisites](#/1)
                    * Introduction
                      * [Apache Foundation](#/6)
                      * [Troy-West](#/7)
                      * [Kafka Overview](#/8)
                    * Kafka the Message Broker
                      * [The Log](#/6)
                      * [Topics](#/6)
                      * [Partitions](#/6)
                      * [Replication](#/6)

                    <a href="#" class="navigate-down"><i class="fas fa-chevron-down"></i> More</a>
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    * Kafka the Message Broker
                      * [Producers](#/6)
                      * [Consumers](#/6)
                      * [Consumer Groups](#/6)

                    <a href="#" class="navigate-down"><i class="fas fa-chevron-down"></i> More</a>
                </textarea>
            </section>
        </section>

        <section data-background="img/title.png" data-background-size="contain" data-markdown
                 style="padding-top: 150px;">
            <textarea data-template>
                ### Prerequisites
                * Java / Clojure IDE installed
                * [Docker](https://www.docker.com/) & [Docker Compose](https://docs.docker.com/compose/install/) installed
                * [Number Stations](https://github.com/troy-west/number-stations) cloned
            </textarea>
        </section>

        <section>
            <div class="ulist">
                <a href="https://www.troywest.com/">
                    <img alt="Troy-West Logo"
                         data-src="img/tw-light.png"
                         style="background:none; border:none; box-shadow:none; width: 30%"></a>
                <ul>
                    <li>Distributed Systems Consultancy</li>
                    <li>Kafka since 0.8.0 (2013)</li>
                    <li>Cassandra since 2.0.1 (2013)</li>
                    <li>Clojure / Data-Oriented</li>
                </ul>
            </div>
        </section>

        <section data-background="img/unsplash/sergey-zolkin-21234-unsplash.jpg" data-background-size="contain">
            <a style="position: absolute; left: 0; background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px"
               href="https://unsplash.com/@szolkin?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge"
               target="_blank" rel="noopener noreferrer"
               title="Download free do whatever you want high-resolution photos from Sergey Zolkin"><span
                    style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg"
                                                                      style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white"
                                                                      viewBox="0 0 32 32"><title>unsplash-logo</title><path
                    d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></span><span
                    style="display:inline-block;padding:2px 3px">Sergey Zolkin</span></a>
            <h1 style="color:white">Today</h1>

            <div style="background-color: gray; opacity: 0.9;"><h3 style="color: white;">Presentations</h3></div>

            <div style="background-color: gray; opacity: 0.9;"><h3 style="color: white;">Notebook Examples</h3></div>

            <div style="background-color: gray; opacity: 0.9;"><h3 style="color: white;">Real Code</h3></div>

            <div style="background-color: white; opacity: 0.8;"><a
                    href="https://github.com/troy-west/apache-kafka-three-ways">Open Sourced under the MIT License.</a>
            </div>
        </section>

        <section data-background="img/unsplash/sergey-zolkin-21234-unsplash.jpg" data-background-size="contain">
            <h1 style="color:white">Today</h1>

            <div style="background-color: gray; opacity: 0.9;"><h3 style="color: white;">ASK QUESTIONS!</h3></div>
        </section>

        <section data-background="img/unsplash/adam-griffith-254696-unsplash.jpg" data-background-size="contain">
            <a style="position: absolute; left: 0; background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px"
               href="https://unsplash.com/@aggriffith?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge"
               target="_blank" rel="noopener noreferrer"
               title="Download free do whatever you want high-resolution photos from Adam Griffith"><span
                    style="display:inline-block;padding:2px 3px">
                <svg xmlns="http://www.w3.org/2000/svg"
                     style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white"
                     viewBox="0 0 32 32"><title>unsplash-logo</title><path
                        d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></span><span
                    style="display:inline-block;padding:2px 3px">Adam Griffith</span></a>
            <h1 style="line-height: 0.8; margin-top: 200px; color: white; margin-bottom: 0px;">RULES</h1>
            <p style="margin: 0; text-decoration: underline;"><a/href="https://www.recurse.com/social-rules"
                style="color: #53bd95;">Recurse Center of NYC</a></p>
        </section>

        <section>
            <img data-src="img/ak3w.png" style="background:none; border:none; box-shadow:none; width: 70%">>
        </section>

        <section data-background="img/way-1.png" data-background-size="contain">
        </section>

        <section data-background="img/way-2.png" data-background-size="contain">
        </section>

        <section data-background="img/way-3.png" data-background-size="contain">
        </section>

        <section data-background="img/way-x.png" data-background-size="contain">
        </section>

        <section>
            <div class="ulist">
                <a href="https://www.apache.org/">
                    <img alt="Apache Software Foundation Logo"
                         data-src="img/apache-foundation.png"
                         style="background:none; border:none; box-shadow:none; width: 60%"></a>
                <ul>
                    <li>350+ projects</li>
                    <li>200M+ lines of code</li>
                    <li>7000+ committers</li>
                    <li>All volunteers</li>
                </ul>
            </div>
        </section>

        <section data-background="img/kafka.png" data-background-size="contain" data-markdown
                 data-separator-notes="^Note:" style="padding-top: 150px;">
            <textarea data-template>
                | Year | Release | Milestone |
                | ---- |---------|-----------|
                | 2011 | | Open sourced by LinkedIn |
                | 2012 | 0.7.0 | First post-incubation release |
                | 2016 | 0.10.0 | Kafka Streams  |
                | 2016 | 0.10.1 | Interactive Queries |
                | 2017 | 0.11.0 | Exactly once processing |

                Note:
                * Latest release 2.2.0 on March 22nd 2019
                * 34 releases since escaping incubation
            </textarea>
        </section>

        <section data-background="img/title.png" data-background-size="contain" data-markdown
                 style="padding-top: 150px;">
            <textarea data-template>
                # Data v Dogma
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ### Data Is Not Necessarily

                ## An Event
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ### There is no value in defining systems as:

                ## Event-Driven / Event-Sourced / CQRS
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ### Favour adjectives not nouns
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ### Data Is:

                ## Mutable or Immutable
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ### Data Is:

                ## Ephemeral or Durable
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ### Data Is:

                ## In-Flight or At-Rest
            </textarea>
        </section>

        <section data-markdown>
            <textarea data-template>
                ## Know Your Data

                ## Know Your Tools
            </textarea>
        </section>

        <section data-background="img/idea-sml.png" data-background-size="contain" data-markdown
                 data-separator-notes="^Note:" style="padding-top: 150px;">
            <textarea data-template>
                ## Define systems by

                # Decisions
            </textarea>
        </section>

        <section data-background="img/trade-off-sml.png" data-background-size="contain" data-markdown
                 data-separator-notes="^Note:" style="padding-top: 150px;">
            <textarea data-template>
                ## and

                # Trade-Offs
            </textarea>
        </section>

        <section data-background="img/idea-sml.png" data-background-size="contain" data-markdown
                 data-separator-notes="^Note:" style="padding-top: 150px;">
            <textarea data-template>
                ## Key Kafka Decisions:

                 * High Availability <!-- .element: class="fragment" data-fragment-index="1" -->

                 * Linear Scalability <!-- .element: class="fragment" data-fragment-index="2" -->

                 * Near Real-Time <!-- .element: class="fragment" data-fragment-index="3" -->
            </textarea>
        </section>

        <section>
            <section data-background="img/broker/idea.png" data-background-size="contain" style="padding-top: 280px;">
                <a href=""><h2><i class="fas fa-chevron-down"></i></h2></a>
            </section>

            <section data-background="img/unsplash/alain-wong-61678-unsplash.jpg" data-background-size="contain"
                     data-separator-notes="^Note:">
                <a style="position: absolute; left: 0; background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px"
                   href="https://unsplash.com/@alainwong?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge"
                   target="_blank" rel="noopener noreferrer"
                   title="Download free do whatever you want high-resolution photos from Alain Wong"><span
                        style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg"
                                                                          style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white"
                                                                          viewBox="0 0 32 32"><title>unsplash-logo</title><path
                        d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></span><span
                        style="display:inline-block;padding:2px 3px">Alain Wong</span></a>
                <h1 style="color:black">The Log</h1>

                <div class="fragment fade-up" style="background-color: white; opacity: 0.8;">
                    <p>
                        <a href="https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying"
                           style="text-decoration: underline">
                            What every software engineer should know about real-time data's unifying abstraction<br/>
                        </a>
                        --Jay Kreps (read this ^^)
                    </p>
                </div>
            </section>

            <section>
                <div class="ulist">
                    <ul>
                        <li>Append Only</li>
                        <li>Sequence of Records</li>
                        <li>Naturally Immutable</li>
                        <li>Ordered by Time</li>
                        <li>ID by Offset</li>
                        <li>Ubiquitous</li>
                    </ul>
                    <a href="https://www.troywest.com/">
                        <img alt="Log" data-src="img/broker/log.png"
                             style="margin-left: 20px; background:none; border:none; box-shadow:none; width: 40%"></a>
                </div>
            </section>

            <section>
                <img alt="Broker" data-src="img/broker/overview.png"
                     style="margin: 0; background:none; border:none; box-shadow:none; width: 90%">
                <h3 class="fragment">What about High Availability & Linear Scalability?</h3>
            </section>

            <section data-background="img/idea-sml.png" data-background-size="contain" data-markdown
                     data-separator-notes="^Note:">
            <textarea data-template>
                ### High Availability

                #### To Continue Operating When a Broker Fails

                * Replicate the log to multiple brokers
                * One broker is the leader, the others are followers
                * Consumers and Producers only talk to the leader
                * Fail-over to a follower when a leader dies
            </textarea>
            </section>

            <section>
                <h3 style="margin-bottom: 0">Replication Factor = 3</h3>
                <img class="fragment" alt="Replication" data-src="img/broker/replication.png"
                     style="margin: 0; background:none; border:none; box-shadow:none; width: 80%">
            </section>

            <section data-background="img/idea-sml.png" data-background-size="contain" data-markdown
                     data-separator-notes="^Note:">
            <textarea data-template>
                ### High Availability

                * Each Cluster has a single 'Controller' Broker
                * The Controller decides replica leaders
                * Zookeeper performs controller elections
                * Zookeeper stores leadership metadata
            </textarea>
            </section>

            <section data-background="img/trade-off-sml.png" data-background-size="contain" data-markdown
                     data-separator-notes="^Note:">
            <textarea data-template>
                ### Trade Off

                * Requires a whole new distributed system (ZK)
            </textarea>
            </section>

            <section data-background="img/idea-sml.png" data-background-size="contain" data-markdown
                     data-separator-notes="^Note:">
            <textarea data-template>
                ### Linear Scalability

                #### To Scale The Volume of Production and Consumption

                * Break the log into multiple parts
                * Distribute records to partitions by (optional) key
                * Records with the same key go to the same partition
                  * Unless you change the number of partitions
            </textarea>
            </section>

            <section>
                <h3 style="margin-bottom: 0">Partitions = 6</h3>
                <img class="fragment" alt="Replication" data-src="img/broker/distribution.png"
                     style="margin: 0; background:none; border:none; box-shadow:none; width: 80%">
            </section>

            <section>
                <h3 style="margin-bottom: 0">Cluster of 3 Nodes</h3>
                <h5 style="margin-bottom: 0">Partitions = 6, Replication Factor = 3</h5>
                <img class="fragment" alt="Replication" data-src="img/broker/cluster.png"
                     style="margin: 0; background:none; border:none; box-shadow:none; width: 80%">
            </section>

            <section data-background="img/idea-sml.png" data-background-size="contain" data-markdown
                     data-separator-notes="^Note:">
            <textarea data-template>
                # TOPIC

                * A partitioned, replicated, durable log
                * Each partition consisting of KeyedMessage records
                * Partitions are broken into segments on disk
                * Provides a configurable Time To Live (TTL)
            </textarea>
            </section>

            <section data-background="img/trade-off-sml.png" data-background-size="contain" data-markdown
                     data-separator-notes="^Note:">
            <textarea data-template>
                # TOPIC

                * Need to ensure keys are roughly evenly distributed
                * Repartitioning redistributes keys among partitions
                * Semantic partitioning
                * Order is only guaranteed within a partition
            </textarea>
            </section>
        </section>

        <section data-background="img/idea.png" data-background-size="contain" data-markdown
                 data-separator-notes="^Note:" style="padding-top: 150px;">
            <textarea data-template>
                # Highly Available
            </textarea>
        </section>

    </div>

</div>

<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {src: 'plugin/highlight/highlight.js', async: true}
        ],
        hash: true,
    });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-45054091-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-45054091-2');
</script>

</body>
</html>
